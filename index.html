<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Esame</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-4">
    <div id="app" class="max-w-2xl mx-auto py-8"></div>

    <script>
        const questions = [{"id": "SS_PP_256", "text": "La teoria di Piaget √® definita come:", "answers": ["costruttivista", "sociale", "associazionista", "ecologista"], "correct_index": 0}, {"id": "SS_PP_107", "text": "Per Piaget, il pensiero dell'adulto √®:", "answers": ["qualitativamente diverso da quello del bambino", "qualitativamente identico a quello del bambino", "caratterizzato da operazioni mentali irreversibili", "caratterizzato da animismo"], "correct_index": 0}, {"id": "SS_PP_108", "text": "I modelli connessionisti:", "answers": ["sono modellati sulle strutture e i processi di elaborazione delle informazioni del cervello umano", "sono stati elaborati da Freud", "spiegano solo i meccanismi di apprendimento per imitazione", "riguardano solo la prima infanzia"], "correct_index": 0}, {"id": "SS_PP_109", "text": "Secondo gli etologi un comportamento innato:", "answers": ["√® presente senza che vi sia stata un'importante esperienza di apprendimento precedente", "non √® universale per la specie", "si apprende per imitazione", "si apprende per condizionamento operante"], "correct_index": 0}, {"id": "SS_PP_110", "text": "Un cambiamento ontogenetico:", "answers": ["riguarda il processo di sviluppo di un organismo", "√® un cambiamento lento che avviene nelle specie nel corso di molte generazioni", "avviene solo per l'adulto", "avviene solo nella prima infanzia"], "correct_index": 0}, {"id": "SS_PP_304", "text": "La teoria dell'attaccamento √® stata sviluppata in particolare da:", "answers": ["Bowlby", "Piaget", "Maslow", "Pavlov"], "correct_index": 0}, {"id": "SS_PP_294", "text": "Nell'espressione Teoria della Gestalt, \"Gestalt\" significa:", "answers": ["forma, struttura organizzata", "dimensione, estensione", "ampiezza, lunghezza", "elemento separato"], "correct_index": 0}, {"id": "SS_PP_113", "text": "In relazione al linguaggio, la semantica riguarda:", "answers": ["il significato delle parole", "i suoni delle parole", "l'uso del linguaggio nel contesto sociale", "le regole di costruzione della frase"], "correct_index": 0}, {"id": "SS_PP_321", "text": "Lo sviluppo della memoria:", "answers": ["coinvolge cambiamenti sia quantitativi sia qualitativi", "avviene solo attraverso cambiamenti qualitativi", "avviene solo attraverso cambiamenti quantitativi", "si conclude nella prima infanzia"], "correct_index": 0}, {"id": "SS_PP_115", "text": "Le strategie di studio dette di elaborazione-riorganizzazione consentono:", "answers": ["non solo la selezione ma anche la trasformazione e integrazione delle informazioni importanti", "solo la selezione delle informazioni importanti", "l'integrazione delle informazioni poco rilevanti", "di disporre le schede di valutazione"], "correct_index": 0}, {"id": "SS_PP_353", "text": "Se usiamo dei ricordi impliciti su procedure (o modi di fare le cose) automatiche, ci viene richiesto di utilizzare la memoria a lungo termine:", "answers": ["procedurale", "distale", "dichiarativa", "sinistra"], "correct_index": 0}, {"id": "SS_PP_368", "text": "Se ci concentriamo solo sulla voce di un'amica in un bar rumoroso stiamo usando la capacit√† di:", "answers": ["attenzione selettiva", "attenzione per le voci", "attenzione contro il rumore", "multitasking"], "correct_index": 0}, {"id": "SS_PP_381", "text": "I limiti del sistema cognitivo umano possono riguardare:", "answers": ["le capacit√† di memoria e le strategie di elaborazione", "le capacit√† di memoria ma non le strategie di elaborazione", "solo le capacit√† di memoria verbale", "solo le strategie di elaborazione"], "correct_index": 0}, {"id": "SS_PP_371", "text": "Lo studio √® definito come:", "answers": ["una forma di apprendimento intenzionale ed autonoma messa in atto da uno studente", "una forma di insegnamento intenzionale ed autonoma messa in atto da uno studente", "una forma di apprendimento da esperienze quotidiane", "una forma di apprendimento che si attiva tramite l'inserimento in un contesto significativo"], "correct_index": 0}, {"id": "SS_PP_389", "text": "L'International Classification of Functioning, Disability and Health (ICF) fa riferimento:", "answers": ["al funzionamento globale della persona", "solo ai fattori ambientali", "solo ai facilitatori", "solo agli aspetti patologici"], "correct_index": 0}, {"id": "SS_PE_112", "text": "Secondo la normativa vigente in tema di organizzazione scolastica, la scuola secondaria di I grado √® considerata:", "answers": ["parte del primo ciclo di istruzione.", "scuola di grado preparatorio.", "parte del secondo ciclo di istruzione.", "scuola di avviamento al lavoro."], "correct_index": 0}, {"id": "SS_PE_12", "text": "Un documento UNESCO di rilevanza pedagogica √® quello intitolato Learning: the treasure within (tradotto in italiano con: Nell'educazione un tesoro) e pubblicato nel 1996. √à noto anche, dal nome di chi ha coordinato la Commissione che lo ha redatto, come:", "answers": ["Rapporto Delors.", "Metodo Montessori.", "Riforma Moratti.", "Sistema Dewey."], "correct_index": 0}, {"id": "SS_PE_13", "text": "Il sapere pedagogico pu√≤ assumere anche la forma di un \"sapere di casi\", ossia:", "answers": ["un sapere di fatti unici e singolari o fatti esemplari.", "un sapere nato casualmente dall'improvvisazione.", "un sapere di intuzioni non comprovate da fatti.", "un sapere teorico che ignora la dimensione fattuale."], "correct_index": 0}, {"id": "SS_PE_187", "text": "La pedagogia interculturale concepisce le culture come:", "answers": ["dinamiche.", "statiche.", "inconoscibili.", "cristallizzate."], "correct_index": 0}, {"id": "SS_PE_15", "text": "John Dewey considera le scienze sociali, e soprattutto la ricerca psicologica, come:", "answers": ["fonti di una scienza dell'educazione.", "effetti di una scienza dell'educazione.", "declinazioni empiriche della pedagogia.", "saperi irrilevanti per la pedagogia."], "correct_index": 0}, {"id": "SS_PE_16", "text": "La riflessione pedagogica ritiene teoreticamente fondato parlare di \"educazione degli adulti\"?", "answers": ["S√¨, perch√© l'essere umano √® in continua evoluzione.", "Solo in riferimento ad adulti con bisogni educativi speciali.", "Solo in riferimento alla rieducazione degli adulti autori di reato.", "No, perch√© l'educazione √® rivolta esclusivamente ai bambini e agli adolescenti."], "correct_index": 0}, {"id": "SS_PE_17", "text": "Nell'Enciclopedia pedagogica diretta da M. Laeng, si riporta la seguente definizione: \"Azione che favorisce lo sviluppo fisico, intellettuale e morale della persona umana, verso la piena coscienza di s√© e il pieno dominio di s√©, e verso la rispondenza reciproca alle esigenze della comunicazione e cooperazione sociale, nella partecipazione ai valori\". A cosa si riferisce?", "answers": ["All'educazione.", "Alla conoscenza.", "Alla pediatria.", "Alla riflessione."], "correct_index": 0}, {"id": "SS_PE_182", "text": "Organizzare i contesti formativi come \"comunit√† di pratiche\" significa:", "answers": ["organizzarli come luoghi di esperienza dove si impara facendo cose e facendo insieme con gli altri.", "organizzarli come luoghi di apprendimento individualistico di conoscenze gi√† strutturate.", "organizzarli come luoghi di apprendimento collocati all'interno di realt√† politiche o sindacali che promuovano una esperienza formativa per la costruzione della futura classe dirigente.", "organizzarli come tappe di una formazione itinerante, che comporta la visita ai luoghi principali di una comunit√†, come la casa di riposo, il municipio o la biblioteca."], "correct_index": 0}, {"id": "SS_PE_19", "text": "Un problema su cui la pedagogia √® chiamata a riflettere riguarda l'insieme di azioni violente e intimidatorie nei confronti degli altri (quali molestie verbali, aggressioni fisiche, persecuzioni), generalmente attuate in ambiente scolastico. Questo fenomeno prende il nome di:", "answers": ["bullismo.", "hacking.", "goliardia.", "iperattivit√†."], "correct_index": 0}, {"id": "SS_PE_20", "text": "\"Costretto a imparare da s√©, Emilio usa della sua ragione e non di quella degli altri. [...] Mi basta che sappia trovare l'a che serve in tutto quello che fa, e il perch√© in tutto quello che crede. Ancora una volta, lo ripeto, il mio scopo non √® affatto di dargli la scienza, ma di fargliela stimare esattamente per quel che vale, e di fargli amare la verit√† sopra ogni cosa\" (Rousseau, Emilio o dell'educazione). Questo estratto fa riferimento a uno dei concetti fondamentali per la riflessione pedagogica, quale?", "answers": ["Quello di autonomia.", "Quello di autoironia.", "Quello di imitazione.", "Quello di empatia."], "correct_index": 0}, {"id": "SS_DI_166", "text": "Le competenze valutative non sono innate, √® pertanto importante supportare gli studenti nell'attuazione delle pratiche di feedback attraverso momenti di feedback literacy. In che cosa consistono?", "answers": ["In attivit√† finalizzate ad aiutare gli studenti a comprendere, elaborare e utilizzare i feedback per migliorare il proprio apprendimento.", "In attivit√† finalizzate a supportare gli studenti a scrivere un feedback in lingue straniere per sviluppare abilit√† linguistiche avanzate.", "Nel lasciare che gli studenti imparino a dare e ricevere feedback direttamente durante le attivit√† senza spiegare loro come farlo correttamente.", "In attivit√† finalizzate a comprendere che i feedback efficaci possono essere formulati esclusivamente dai genitori che li conoscono approfonditamente."], "correct_index": 0}, {"id": "SS_DI_17", "text": "In ambito didattico, quando si verifica l'effetto alone nella formulazione di un giudizio valutativo da parte degli insegnanti?", "answers": ["Quando l'esito della valutazione di un aspetto del rendimento viene trasferito a un altro aspetto della stessa persona.", "Quando l'esito della valutazione di un aspetto del rendimento non influisce sugli altri aspetti.", "In realt√† l'effetto alone non riguarda gli studenti, bens√¨ esclusivamente la valutazione dei docenti da parte dei genitori.", "Quando la documentazione raccolta non consente di formulare un voto per la scheda di valutazione finale (pagella)."], "correct_index": 0}, {"id": "SS_DI_168", "text": "Proporre agli studenti rubriche di valutazione da utilizzare come strumento didattico consente loro di", "answers": ["comprendere i criteri di valutazione di un compito.", "valutare il compito solo secondo i criteri che essi ritengono maggiormente adeguati.", "divenire competenti sulla materia oggetto di studio al pari dei docenti.", "apprendere a valutare un compito senza considerarne il contenuto reale."], "correct_index": 0}, {"id": "SS_DI_174", "text": "In riferimento all'apprendimento cooperativo, la valutazione in gruppo", "answers": ["√® essenziale ai fini di un costante miglioramento.", "aumenta la possibilit√† che eventuali errori vengano ripetuti in futuro.", "√® dannosa per il potenziale del gruppo, quindi sconsigliata.", "non √® prevista, poich√® si opta solo per una valutazione individuale."], "correct_index": 0}, {"id": "SS_DI_177", "text": "La progettazione a ritroso", "answers": ["propone un approccio che muove dai risultati di apprendimento attesi per sviluppare gli altri aspetti della progettazione didattica.", "propone di seguire pedissequamente l'ordine degli argomenti previsto dai libri di testo nella progettazione di una lezione.", "propone un approccio che presta scarsa attenzione ai collegamenti fra i diversi aspetti della progettazione didattica.", "propone un approccio che mira a promuovere negli studenti esclusivamente la memorizzazione dei contenuti."], "correct_index": 0}, {"id": "SS_DI_21", "text": "L'approccio didattico centrato sul docente (chiamato anche teacher centered approach) pu√≤ essere contrapposto a", "answers": ["l'approccio centrato sullo studente (student centered approach).", "l'approccio centrato sulle emozioni (emotional centered approach).", "l'approccio centrato sul contenuto (content centered approach).", "l'approccio centrato sull'organizzazione (organization centered approach)."], "correct_index": 0}, {"id": "SS_DI_170", "text": "Come viene definita l'abilit√†?", "answers": ["La capacit√† di applicare conoscenze e di usare know-how per portare a termine compiti.", "Il risultato della memorizzazione delle conoscenze teoriche.", "La comprovata capacit√† di mettere in atto credenze e valori personali.", "Un insieme di accadimenti senza alcun nesso causale."], "correct_index": 0}, {"id": "SS_DI_176", "text": "Spencer e Spencer utilizzano la metafora dell'iceberg per esemplificare i legami tra alcuni elementi che caratterizzano il processo di apprendimento. Quali elementi si collocano nella parte visibile dell'iceberg?", "answers": ["Conoscenze e competenze.", "Valori e atteggiamenti.", "Tratti di personalit√†.", "Motivazioni."], "correct_index": 0}, {"id": "SS_DI_24", "text": "Un approccio per problemi reali", "answers": ["pu√≤ essere messo in relazione con l'attivismo pedagogico.", "pu√≤ essere messo in relazione con la teoria evoluzionistica.", "si pu√≤ realizzare solo impiegando l'e-learning.", "si pu√≤ realizzare solo attraverso lezioni frontali."], "correct_index": 0}, {"id": "SS_DI_25", "text": "Con l'espressione \"educazione informale\" ci si riferisce a", "answers": ["quel processo attraverso cui i soggetti acquisiscono conoscenze e competenze attraverso istituzioni sociali come la famiglia, i gruppi amicali, i team di lavoro e, in alcuni casi, anche attraverso strumenti comunicativi come i mass media.", "quel processo attraverso cui i soggetti acquisiscono conoscenze e competenze in modo incompleto o comunque non completamente soddisfacente.", "quel processo attraverso cui i soggetti acquisiscono conoscenze e competenze che, per quanto interessanti, non sono spendibili in alcun modo, n√© in un contesto lavorativo, n√© in un contesto personale.", "quel processo attraverso cui i soggetti acquisiscono conoscenze e competenze che sono spendibili solo all'interno di un contesto professionale specifico e predeterminato."], "correct_index": 0}, {"id": "SS_DI_169", "text": "I compiti autentici supportano gli studenti nell'acquisizione e sviluppo delle competenze, anche nella prospettiva delle competenze trasversali. Quale fra le seguenti √® una caratteristica di questa metodologia didattica?", "answers": ["Collocare i compiti di apprendimento nel contesto delle situazioni di vita reale.", "Fornire compiti di apprendimento esclusivamente astratti.", "Valutare gli esiti dell'apprendimento attraverso test con domande a risposta chiusa.", "Consentire esclusivamente attivit√† di apprendimento individuali."], "correct_index": 0}, {"id": "SS_DI_27", "text": "Il modo in cui gli studenti percepiscono l'ambiente di apprendimento (sia fisico che relazionale) √®", "answers": ["collegato sia alla loro motivazione che al loro impegno ad apprendere.", "ininfluente rispetto alla loro motivazione e al loro impegno ad apprendere.", "blandamente legato alla loro motivazione ma non al processo di apprendimento.", "comunemente considerato legato alla motivazione, ma non ci sono studi a riguardo."], "correct_index": 0}, {"id": "SS_DI_180", "text": "Eurydice (2019) definisce lo \"sviluppo professionale continuo\" dei docenti", "answers": ["come l'insieme delle attivit√† di sviluppo professionale in servizio, formali e non formali.", "come l'insieme delle attivit√† di sviluppo professionale pre-servizio esclusivamente formali.", "come l'insieme delle attivit√† di sviluppo professionale condotte esclusivamente in ambito informale.", "come l'insieme delle attivit√† di sviluppo professionale finanziate direttamente dall'Istituto."], "correct_index": 0}, {"id": "SS_DI_178", "text": "Nell'EntreComp (Quadro Europeo delle Competenze Imprenditoriali), pubblicato dall'Unione Europea nel 2016, le competenze sono divise in tre aree:", "answers": ["l'area delle risorse ‚Äì l'area delle idee ‚Äì l'area dell'azione.", "l'area matematica ‚Äì l'area linguistica ‚Äì l'area tecnica.", "l'area informatica ‚Äì l'area della sostenibilit√† ‚Äì l'area trasversale.", "l'area pre ‚Äì l'area in ‚Äì l'area post."], "correct_index": 0}, {"id": "SS_DI_30", "text": "A quale competenza mira un'azione didattica orientata a promuovere la comprensione dei pensieri e delle sensazioni dell'altro, e delle motivazioni che vi soggiacciono, assumendo il suo punto di vista?", "answers": ["Empatia", "Autoefficacia", "Resistenza", "Autostima"], "correct_index": 0}, {"id": "SS_IN_6", "text": "Which of the following options is CORRECT?", "answers": ["If we don't hurry, we'll miss the train", "If we won't hurry, we'll miss the train", "We'll miss the train if we hurry", "We'll miss the train if we won't hurry"], "correct_index": 0}, {"id": "SS_IN_7", "text": "Choose the correct option to complete the following sentence: How long ____________ Jack? You seem to be good friends.", "answers": ["have you known", "do you know", "are you knowing", "were you knowing"], "correct_index": 0}, {"id": "SS_IN_8", "text": "Choose the correct option to complete the following sentence: How many children ____________?", "answers": ["does your sister have", "did your sister", "your sister has", "have your sister"], "correct_index": 0}, {"id": "SS_IN_9", "text": "Choose the correct option to complete the following sentence: We are ____________ of time, the planet is dying!", "answers": ["running out", "running for", "finishing", "losing"], "correct_index": 0}, {"id": "SS_IN_10", "text": "Choose the correct option to complete the following sentence: I'm sorry I'm late. There was ____________ traffic on the motorway.", "answers": ["heavy", "many", "light", "a few"], "correct_index": 0}, {"id": "SS_TD_06", "text": "Un Learning Management System (LMS) √®:", "answers": ["un software o un applicativo web based che incorpora le funzioni necessarie all'implementazione di un sistema organizzato di erogazione di corsi per la formazione.", "uno strumento di progettazione, come il lesson plan, che guida il docente nell'organizzazione della lezione.", "una app che consente l'archiviazione e l'organizzazione dei materiali didattici in cartelle e sotto-cartelle.", "una figura che affianca Dirigente e DSGA nell'organizzazione didattica della scuola, guidando i docenti nella scelta dei testi e nella definizione della progettazione annuale."], "correct_index": 0}, {"id": "SS_TD_59", "text": "Per potenziare le competenze legate alla comunicazione e collaborazione online, il docente pu√≤ utilizzare:", "answers": ["documenti di scrittura collaborativa.", "motori di ricerca.", "database certificati.", "software di video editing."], "correct_index": 0}, {"id": "SS_TD_99", "text": "I dispositivi digitali possono essere un importante alleato dei docenti quando si tratta di dare supporto agli studenti. A questo proposito, infatti, essi consentono di:", "answers": ["rispondere tempestivamente alle domande e ai dubbi degli studenti attraverso strumenti online.", "velocizzare i tempi di produzione dei materiali didattici.", "facilitare gli scambi tra docenti.", "archiviare in modo pi√π semplice e immediato i documenti."], "correct_index": 0}, {"id": "SS_TD_09", "text": "Da un punto di vista tecnologico, quale tra questi pu√≤ essere considerato un setting immersivo?", "answers": ["Un ambiente per la realt√† aumentata.", "La biblioteca.", "Un centro sportivo.", "Qualsiasi aula in cui il docente riesca a risultare coinvolgente."], "correct_index": 0}, {"id": "SS_TD_61", "text": "Se un docente vuole svolgere una ricerca online e vuole escludere un termine dai risultati di ricerca, dovr√†:", "answers": ["inserire NOT prima del termine che si vuole ecludere.", "inserire AND prima del termine che si vuole escludere.", "inserire OR prima del termine che si vuole escludere.", "inserire PLUS prima del termine che si vuole escludere."], "correct_index": 0}];

        let currentQuestion = 0;
        let answers = {};
        let shuffledAnswers = {};

        function shuffleArray(arr) {
            const newArr = [...arr];
            for (let i = newArr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
            }
            return newArr;
        }

        function getShuffledAnswers(questionIndex) {
            if (!shuffledAnswers[questionIndex]) {
                const original = questions[questionIndex].answers;
                const shuffled = shuffleArray(original);
                shuffledAnswers[questionIndex] = {};
                shuffled.forEach((answer, index) => {
                    const originalIndex = original.indexOf(answer);
                    shuffledAnswers[questionIndex][String.fromCharCode(97 + index)] = originalIndex;
                });
            }
            return shuffledAnswers[questionIndex];
        }

        function renderQuiz() {
            const appDiv = document.getElementById('app');
            const question = questions[currentQuestion];
            const labels = ['a', 'b', 'c', 'd'];
            const shuffled = getShuffledAnswers(currentQuestion);

            let html = `
                <div class="bg-white rounded-lg shadow-lg p-8 mb-6">
                    <div class="mb-6">
                        <div class="text-sm text-gray-500 mb-2">Domanda ${currentQuestion + 1} di ${questions.length}</div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: ${(Object.keys(answers).length / questions.length) * 100}%"></div>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">${Object.keys(answers).length}/${questions.length} completate</div>
                    </div>

                    <h2 class="text-2xl font-bold text-gray-800 mb-8">${question.text}</h2>

                    <div class="space-y-3 mb-8">
                        ${labels.map((label, idx) => {
                            const originalIndex = shuffled[label];
                            const answerText = question.answers[originalIndex];
                            const isSelected = answers[currentQuestion] === originalIndex;
                            return `
                                <button onclick="selectAnswer(${originalIndex})" class="w-full p-4 text-left border-2 rounded-lg font-medium transition-all ${isSelected ? 'border-blue-600 bg-blue-50 text-blue-900' : 'border-gray-200 bg-white text-gray-700 hover:border-blue-300'}">
                                    <span class="inline-block w-8 h-8 mr-3 rounded-full border-2 ${isSelected ? 'border-blue-600 bg-blue-600 text-white' : 'border-gray-300'} text-center leading-6 font-bold">${label}</span>
                                    ${answerText}
                                </button>
                            `;
                        }).join('')}
                    </div>

                    <div class="flex justify-between gap-4">
                        <button onclick="previousQuestion()" class="flex-1 px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors ${currentQuestion === 0 ? 'opacity-50 cursor-not-allowed' : ''}" ${currentQuestion === 0 ? 'disabled' : ''}>
                            ‚Üê Precedente
                        </button>
                        <button onclick="nextQuestion()" class="flex-1 px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors ${currentQuestion === questions.length - 1 ? 'opacity-50 cursor-not-allowed' : ''}" ${currentQuestion === questions.length - 1 ? 'disabled' : ''}>
                            Successiva ‚Üí
                        </button>
                    </div>

                    <button onclick="finishQuiz()" class="w-full mt-4 px-6 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition-colors text-lg">
                        Finisci Quiz
                    </button>
                </div>
            `;
            appDiv.innerHTML = html;
        }

        function selectAnswer(index) {
            answers[currentQuestion] = index;
            renderQuiz();
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuiz();
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuiz();
            }
        }

        function finishQuiz() {
            const unanswered = [];
            for (let i = 0; i < questions.length; i++) {
                if (!(i in answers)) {
                    unanswered.push(i);
                }
            }

            if (unanswered.length > 0) {
                const firstUnanswered = unanswered[0];
                alert(`Non hai risposto a tutte le domande. Ti riporto alla domanda ${firstUnanswered + 1}.`);
                currentQuestion = firstUnanswered;
                renderQuiz();
                return;
            }

            showResults();
        }

        function showResults() {
            let correctCount = 0;
            const wrongAnswers = [];

            questions.forEach((q, idx) => {
                const userAnswer = answers[idx];
                if (userAnswer === q.correct_index) {
                    correctCount++;
                } else {
                    wrongAnswers.push({
                        index: idx,
                        question: q.text,
                        userAnswer: q.answers[userAnswer],
                        correctAnswer: q.answers[q.correct_index],
                        userLabel: Object.keys(getShuffledAnswers(idx)).find(key => getShuffledAnswers(idx)[key] === userAnswer),
                        correctLabel: Object.keys(getShuffledAnswers(idx)).find(key => getShuffledAnswers(idx)[key] === q.correct_index)
                    });
                }
            });

            const totalScore = correctCount * 2;
            const appDiv = document.getElementById('app');

            let html = `
                <div class="bg-white rounded-lg shadow-lg p-8">
                    <div class="text-center mb-8">
                        <h1 class="text-4xl font-bold text-green-600 mb-2">Risultati</h1>
                        <div class="text-6xl font-bold text-green-700 mb-4">${totalScore} / 100</div>
                        <div class="text-2xl font-semibold text-gray-700 mb-6">
                            ${correctCount} risposte corrette su ${questions.length}
                        </div>
                    </div>

                    ${wrongAnswers.length > 0 ? `
                        <div class="mb-8">
                            <h2 class="text-2xl font-bold text-red-600 mb-4">Risposte Sbagliate:</h2>
                            <div class="space-y-6">
                                ${wrongAnswers.map(w => `
                                    <div class="border-l-4 border-red-500 pl-4 py-2 bg-red-50 rounded">
                                        <div class="font-semibold text-gray-800 mb-2">Domanda ${w.index + 1}: ${w.question}</div>
                                        <div class="text-red-700 mb-1"><strong>La tua risposta:</strong> [${w.userLabel}] ${w.userAnswer}</div>
                                        <div class="text-green-700"><strong>Risposta corretta:</strong> [${w.correctLabel}] ${w.correctAnswer}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : `
                        <div class="mb-8 p-4 bg-green-50 border-2 border-green-500 rounded-lg text-center">
                            <div class="text-2xl font-bold text-green-700">Perfetto! Tutte le risposte sono corrette! üéâ</div>
                        </div>
                    `}

                    <button onclick="restartQuiz()" class="w-full px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors text-lg">
                        Ricomincia Quiz
                    </button>
                </div>
            `;
            appDiv.innerHTML = html;
        }

        function restartQuiz() {
            currentQuestion = 0;
            answers = {};
            shuffledAnswers = {};
            renderQuiz();
        }

        renderQuiz();
    </script>
</body>
</html>
